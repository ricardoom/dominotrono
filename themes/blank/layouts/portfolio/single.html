<!-- new layout flag: -->
{{ $newLayout := .Params.newLayout }}
<!-- put all the two main classes into variables: -->
{{ $atWrapper := "article-grid-wrapper"}}
{{ $sgWrapper := "section-grid-wrapper"}}
{{ $imgWrapper := "grid-wrapper" }}
{{ $local := .Site.IsServer }}
{{ partial "header.html" . }}
<main>
  {{ if $newLayout }}
  <article class="[ wrapper ][ {{ $atWrapper }} ]">
    {{ else }}
  <article class="{{ $imgWrapper }}">
  {{ end }}
    <h1>{{ .Title }}</h1>
    {{ if $local }}
     <time>{{ .Date.Format "01.02.2006 15:04" }}</time>
    {{ end }}
     <div class="{{ if ( $newLayout ) }}{{ $atWrapper }}{{ else }}{{ $imgWrapper }}{{ end }}__portfolioParent">
        <div  class="portfolio__content [ stack ]">
          {{ .Content }}
        </div>
      </div>
       {{ partial "portfolio_involvement.html" . }}
  </article>
</main>
{{ partial "sidebar.html" . }}
{{ partial "footer.html" . }}
{{ if $local }}
{{ partial "dev.html" . }}
{{ end }}